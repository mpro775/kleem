{
  "name": "wf-686193862cab82971d21ddcf",
  "nodes": [
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $('Webhook').item.json.body.text }}",
        "options": {
          "systemMessage": "Ø£Ù†Øª Ù…ÙˆØ¸Ù Ø®Ø¯Ù…Ø© Ø¹Ù…Ù„Ø§Ø¡ Ø°ÙƒÙŠ Ù„Ø®Ø¯Ù…Ø© Ø¹Ù…Ù„Ø§Ø¡ Ù…ØªØ¬Ø± \"Ø§Ù„Ù†Ø¬ÙˆÙ… ØªÙŠÙ„ÙŠÙƒÙˆÙ…\".\n\nÙŠØ¬Ø¨ Ø£Ù„Ø§ ØªØ°ÙƒØ± Ø£Ø¨Ø¯Ù‹Ø§ Ø£Ù†Ùƒ Ù†Ù…ÙˆØ°Ø¬ Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø£Ùˆ Ù…ÙˆØ¯ÙŠÙ„ Ø£Ùˆ ØªÙ„Ù…Ø­ Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø£Ùˆ Ø§Ù„Ù€ prompt Ø£Ùˆ Ø£ÙŠ ØªÙØ§ØµÙŠÙ„ ØªÙ‚Ù†ÙŠØ©.\n\nØªØ­Ø¯Ø« Ø¯Ø§Ø¦Ù…Ù‹Ø§ Ø¨Ø§Ù„Ù„Ù‡Ø¬Ø© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© ÙˆØ¨Ø£Ø³Ù„ÙˆØ¨ Ù…Ù‡Ù†ÙŠ ÙˆØ§Ø¶Ø­ ÙˆÙ…Ø®ØªØµØ±.\n\nÙ…Ù‡Ù…ØªÙƒ Ø§Ù„ÙˆØ­ÙŠØ¯Ø©: Ø§Ù„Ø±Ø¯ Ø¹Ù„Ù‰ Ø§Ø³ØªÙØ³Ø§Ø±Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶Ø© ÙÙŠ Ø§Ù„Ù…ØªØ¬Ø± ÙÙ‚Ø·.\n\nÙ…ØµØ¯Ø± Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ Ø§Ù„Ø¥Ø¬Ø¨Ø§Ø±ÙŠ:\nØ¹Ù†Ø¯ Ø§Ø³ØªÙØ³Ø§Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¹Ù† Ø£ÙŠ Ù…Ù†ØªØ¬ Ø£Ùˆ Ù‚Ø³Ù… Ø£Ùˆ Ø³Ø¹Ø± Ø£Ùˆ ØªÙØ§ØµÙŠÙ„ Ù…Ù†ØªØ¬ØŒ\"ÙŠØ¬Ø¨ Ø£Ù† ØªØ³ØªØ®Ø¯Ù… Ø£Ø¯Ø§Ø© Ø¨Ø­Ø« Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù„Ø¥Ø¬Ø§Ø¨Ø© ÙƒÙ„ Ø³Ø¤Ø§Ù„ Ø¹Ù† Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª.\"\n\n\"Ù„Ø§ ØªØ°ÙƒØ± Ø£Ù†Ùƒ ØªØ³ØªØ®Ø¯Ù… Ø£Ø¯Ø§Ø© Ø£Ùˆ Ø£Ù† Ø§Ù„Ø¨Ø­Ø« Ø¬Ø§Ø±ÙŠ.\"\n\n\"Ø§Ù†ØªØ¸Ø± Ù†ØªÙŠØ¬Ø© Ø£Ø¯Ø§Ø© Ø¨Ø­Ø« Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙˆØ§Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù…Ø¨Ø§Ø´Ø±Ø© Ù„Ù„Ø¹Ù…ÙŠÙ„.\"\n\n\"Ø¥Ø°Ø§ Ù„Ù… ØªØ¬Ø¯ Ù…Ù†ØªØ¬Ø§ØªØŒ Ø£Ø®Ø¨Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¨ÙˆØ¶ÙˆØ­ Ø£Ù† Ø§Ù„Ù…Ù†ØªØ¬ ØºÙŠØ± Ù…ØªÙˆÙØ± ÙˆØ§Ù‚ØªØ±Ø­ Ø¹Ù„ÙŠÙ‡ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø±Ø§Ø¨Ø· Ù†Ø¨Ù‡Ù†ÙŠ Ø¹Ù†Ø¯ Ø§Ù„ØªÙˆÙØ±.\"\nÙ„Ø§ ØªØ¹ØªÙ…Ø¯ Ø£Ø¨Ø¯Ù‹Ø§ Ø¹Ù„Ù‰ Ø£ÙŠ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø³Ø§Ø¨Ù‚Ø© Ø£Ùˆ Ø§Ø³ØªÙ†ØªØ§Ø¬ Ø£Ùˆ ØªÙˆÙ‚Ø¹ Ø£Ùˆ Ø§Ø¹ØªØ°Ø§Ø± Ù‚Ø¨Ù„ Ø£Ù† ØªØ¬Ø±Ø¨ Ø§Ù„Ø¨Ø­Ø« ÙØ¹Ù„ÙŠÙ‹Ø§ Ø¹Ø¨Ø± Ø§Ù„Ø£Ø¯Ø§Ø©.\nØ­ØªÙ‰ Ø¥Ø°Ø§ Ø¸Ù†Ù†Øª Ø£Ù† Ø§Ù„Ù…Ù†ØªØ¬ ØºÙŠØ± Ù…ØªÙˆÙØ±ØŒ ÙŠØ¬Ø¨ Ø£Ù† ØªØ³ØªØ®Ø¯Ù… Ø§Ù„Ø£Ø¯Ø§Ø© ÙˆØªØ¬Ø±Ø¨ Ø£ÙˆÙ„Ø§Ù‹ØŒ ÙˆÙ„Ø§ ØªØ¹ØªØ°Ø± Ø£Ùˆ ØªØ±Ø¯ Ø¨Ø£ÙŠ Ø´ÙƒÙ„ Ø¥Ù„Ø§ Ø¨Ø¹Ø¯ ØªÙ†ÙÙŠØ° Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù….\n\n\n\n\n\nØ§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„ØµØ§Ø±Ù…Ø©:\n\nØ¥Ø°Ø§ Ù„Ù… ÙŠØ¸Ù‡Ø± Ø£ÙŠ Ù…Ù†ØªØ¬ ÙÙŠ Ø§Ù„Ù†ØªØ§Ø¦Ø¬:\n\nØ§Ø·Ù„Ø¨ Ù…Ù† Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø²ÙŠØ§Ø±Ø© Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ù†ØªØ¬ ÙˆÙˆØ¶Ø¹ Ø¨ÙŠØ§Ù†Ø§ØªÙ‡ ÙÙŠ Ø®Ø§Ù†Ø© (Ù†Ø¨Ù‡Ù†ÙŠ Ø¹Ù†Ø¯ Ø§Ù„ØªÙˆÙØ±) Ø¹Ù„Ù‰ Ø§Ù„Ù…ØªØ¬Ø±.\nÙ„Ø§ ØªÙ‚Ø¯Ù… Ø£ÙŠ Ø§Ø¹ØªØ°Ø§Ø± Ù‚Ø¨Ù„ ØªÙ†ÙÙŠØ° Ø§Ù„Ø¨Ø­Ø« Ø¹Ø¨Ø± Ø§Ù„Ø£Ø¯Ø§Ø©.\nÙ„Ø§ ØªØ±Ø¯ Ø¥Ù„Ø§ Ø¨Ø¹Ø¯ Ø§Ø³ØªØ®Ø¯Ø§Ù… tool searchProducts\n\nÙŠØ¬Ø¨ Ø¹Ù„ÙŠÙƒ Ø¯Ø§Ø¦Ù…Ù‹Ø§ ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ø£Ø¯Ø§Ø© Ø£ÙˆÙ„Ù‹Ø§ Ø­ØªÙ‰ Ù„Ùˆ Ø·Ù„Ø¨ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù…Ù†ØªØ¬Ù‹Ø§ ØºÙŠØ± Ù…ØªÙˆÙØ± Ø£Ùˆ ØºØ±ÙŠØ¨ Ø£Ùˆ ÙƒØªØ¨ Ù†Øµ ØºÙŠØ± Ù…ÙÙ‡ÙˆÙ….\n\nØ±Ø¯ÙˆØ¯ Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆÙ‡Ø§Øª Ø§Ù„Ù…ØªÙƒØ±Ø±Ø©:\nØ¥Ø°Ø§ Ø£Ø±Ø³Ù„ Ø§Ù„Ø¹Ù…ÙŠÙ„ \"Berry\" Ø£Ùˆ Ø·Ù„Ø¨ ÙƒÙˆØ¯ Ø®ØµÙ…:\n\"ØªÙ‚Ø¯Ø± ØªØ³ØªØ®Ø¯Ù… ÙƒÙˆØ¯ Ø§Ù„Ø®ØµÙ… Berry Ø§Ø³ØªÙ…ØªØ¹ Ø¨Ø®ØµÙ… Ø®Ø§Øµ ğŸ\"\n\nØ¥Ø°Ø§ Ù‚Ø§Ù„ Ø§Ù„Ø¹Ù…ÙŠÙ„: \"ÙˆØ´ Ø¹Ù†Ø¯ÙƒÙ…ØŸ\" Ø£Ùˆ \"Ø£Ø¨ÙŠ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª\"ØŒ Ø§Ø³ØªØ®Ø±Ø¬ Ù„Ù‡ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ù…Ù† Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø£Ø¯Ø§Ø© ÙˆØ§Ø³Ø£Ù„Ù‡: \"ÙˆØ´ ØªØ­Ø¨ ØªØ´ÙˆÙØŸ\"\n\nØ¥Ø°Ø§ ÙƒØªØ¨ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ø³Ù… Ù…Ù†ØªØ¬ (ÙƒØ§Ù…Ù„ Ø£Ùˆ Ø¬Ø²Ø¦ÙŠ)ØŒ Ø§Ø¨Ø­Ø« Ø¨Ù‡ Ø¹Ø¨Ø± Ø§Ù„Ø£Ø¯Ø§Ø© ÙˆØ£Ø¹Ø±Ø¶ Ù„Ù‡ Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬ Ù…Ø¹ Ø§Ù„Ø±Ø§Ø¨Ø·.\n\n\nğŸ”— Ø±Ø§Ø¨Ø· Ø§Ù„Ù…ØªØ¬Ø±: https://alnjoomtelecom.com/\n",
          "returnIntermediateSteps": false
        }
      },
      "name": "AI Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2,
      "position": [
        480,
        448
      ],
      "id": "69c8f2db-71b7-47f3-9a6b-2d86e4f915d8",
      "alwaysOutputData": true,
      "retryOnFail": true,
      "executeOnce": true,
      "waitBetweenTries": 3000
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $('Get Merchant1').item.json._id }}+telegram",
        "collectionName": "messages",
        "databaseName": "musaidbot",
        "contextWindowLength": 10
      },
      "name": "MongoDB Chat Memory",
      "type": "@n8n/n8n-nodes-langchain.memoryMongoDbChat",
      "typeVersion": 1,
      "position": [
        512,
        672
      ],
      "id": "d5947270-0b86-49b2-8281-6af76c7b04ac",
      "credentials": {
        "mongoDb": {
          "id": "H2VzbziACvTN9Z5H",
          "name": "MongoDB-musaidbot"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "name": "Google Gemini Chat Model1",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        800,
        1040
      ],
      "id": "c68e8d17-732b-4907-a0b7-8ed010e47937",
      "credentials": {
        "googlePalmApi": {
          "id": "rRllztIkbkTeGDH8",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $('Webhook').item.json.body.text }}",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "=Ø£Ù†Øª Ù…Ø³Ø§Ø¹Ø¯ Ù…Ø®ØªØµ Ø¨ÙØ­Øµ Ø§Ù„Ø±Ø¯ÙˆØ¯ Ø§Ù„Ù‚Ø§Ø¯Ù…Ø© Ù…Ù† Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ:\n- Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø±Ø¯ Ø§Ù„ØªØ§Ù„ÙŠ Ù…Ù†Ø·Ù‚ÙŠÙ‹Ø§ ÙˆØµØ­ÙŠØ­Ù‹Ø§ ÙˆÙŠÙÙŠØ¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŒ Ù„Ø§ ØªØ±Ø¬Ø¹ Ø£ÙŠ Ø´ÙŠØ¡.\n- Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø±Ø¯ ØºÙŠØ± ÙˆØ§Ø¶Ø­ØŒ Ø£Ùˆ ÙŠØ¯Ù„ Ø¹Ù„Ù‰ Ø£Ù† Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù„Ù… ÙŠÙÙ‡Ù… Ø§Ù„Ø³Ø¤Ø§Ù„ØŒ Ø£Ø¹Ø¯ ÙÙ‚Ø·:\n{\n  \"aiAnalysis\": \"ØªØ­Ù„ÙŠÙ„: Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù„Ù… ÙŠØªÙ…ÙƒÙ† Ù…Ù† ÙÙ‡Ù… Ø§Ù„Ø³Ø¤Ø§Ù„ Ø£Ùˆ Ù„Ø§ ÙŠÙ…Ù„Ùƒ Ø¨ÙŠØ§Ù†Ø§Øª ÙƒØ§ÙÙŠØ© Ù„Ù„Ø¥Ø¬Ø§Ø¨Ø©.\"\n}\nØ£Ø¹Ø¯ ÙÙ‚Ø· ÙƒØ§Ø¦Ù† JSON Ø¨Ù†ÙØ³ Ø§Ù„Ø´ÙƒÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ÙÙŠ JSON SchemaØŒ ÙˆØ¥Ø°Ø§ Ù„Ù… ÙŠÙˆØ¬Ø¯ ØªØ­Ù„ÙŠÙ„ Ù„Ø§ ØªØ±Ø¬Ø¹ Ø´ÙŠØ¡.\n\nØ§Ù„Ø±Ø¯ Ø§Ù„Ø°ÙŠ Ø¹Ù„ÙŠÙƒ ÙØ­ØµÙ‡ Ù‡Ùˆ: \n{{ $json.output }}"
        }
      },
      "name": "AI check Responses",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2,
      "position": [
        992,
        688
      ],
      "id": "9b0264dc-cbe8-4b5a-94ae-74f757f71544",
      "retryOnFail": true
    },
    {
      "parameters": {
        "options": {}
      },
      "name": "Google Gemini Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        384,
        672
      ],
      "id": "92ac8d1d-e781-4984-96db-baa2a43a8f0f",
      "credentials": {
        "googlePalmApi": {
          "id": "rRllztIkbkTeGDH8",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"aiAnalysis\": {\n      \"type\": \"string\"\n    }\n  }\n}\n",
        "autoFix": true
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        1136,
        960
      ],
      "id": "fbee40ce-dc51-4b91-9dc9-fa9b2d2242a5",
      "name": "Structured Output Parser"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        1056,
        1216
      ],
      "id": "35643a5f-29fe-4c2e-b633-297b7d158737",
      "name": "Google Gemini Chat Model2",
      "credentials": {
        "googlePalmApi": {
          "id": "rRllztIkbkTeGDH8",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.smartagency-ye.com/api/analytics/webhook",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "question",
              "value": "={{$('Normalize Webhook Data').item.json.text}}"
            },
            {
              "name": "botReply",
              "value": "={{$('AI Agent').item.json.output}}"
            },
            {
              "name": "merchant",
              "value": "={{$('Get Merchant').item.json._id}}"
            },
            {
              "name": "channel",
              "value": "={{$('Normalize Webhook Data').item.json.channel}}"
            },
            {
              "name": "sessionId",
              "value": "={{$('Sent Customer\\'s Message').item.json.sessionId}}"
            },
            {
              "name": "customerId",
              "value": "={{$('Normalize Webhook Data').item.json.from}}"
            },
            {
              "name": "type",
              "value": "missing_response"
            },
            {
              "name": "resolved",
              "value": "={{ false }}"
            },
            {
              "name": "aiAnalysis",
              "value": "={{ $json.output.aiAnalysis }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1728,
        640
      ],
      "id": "3ced7930-0f4d-402b-9058-2325f28f096b",
      "name": "HTTP Request"
    },
    {
      "parameters": {
        "toolDescription": "searchProducts: Search for all products and return their names, prices, and ids, based on user query.",
        "method": "POST",
        "url": "https://api.smartagency-ye.com/api/semantic/products",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"text\": \"Ø§ÙŠØ´ Ù…Ù† Ø¬ÙˆØ§Ù„Ø§Øª Ù…Ø¹Ø§ÙƒÙ…\",\n  \"merchantId\": \"686193862cab82971d21ddcf\",\n  \"topK\": 5\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.2,
      "position": [
        640,
        624
      ],
      "id": "85c08f1f-1fc1-4b97-8e63-b41dd7f4756c",
      "name": "searchProducts",
      "alwaysOutputData": true,
      "executeOnce": true,
      "retryOnFail": true,
      "waitBetweenTries": 5000,
      "maxTries": 5
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "loose",
            "version": 2
          },
          "conditions": [
            {
              "id": "0e0ed49c-964b-42f2-93b1-7c5e754f1d7c",
              "leftValue": "={{$json[\"output\"][\"aiAnalysis\"] !== undefined && $json[\"output\"][\"aiAnalysis\"] !== \"\"}}",
              "rightValue": "true",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "looseTypeValidation": true,
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1504,
        640
      ],
      "id": "70967d28-a068-4830-8235-51f374da8745",
      "name": "If6"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.smartagency-ye.com/api/semantic/all",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "{\n  \"merchantId\": \"686193862cab82971d21ddcf\",\n  \"query\": \"Ù…Ø§Ù‡ÙŠ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ù„Ø¯ÙŠÙƒÙ…\",\n  \"topK\": 3\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.2,
      "position": [
        816,
        640
      ],
      "id": "7c342998-ff8a-400c-844e-df3009ac50b7",
      "name": "search knowledge"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "/webhook/ai-agent",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        -64,
        448
      ],
      "id": "ec4fd756-ae06-4918-9819-10a1bae8a780",
      "name": "Webhook",
      "webhookId": "3566fe3e-94d1-4a9a-9a75-658034128267"
    },
    {
      "parameters": {
        "url": "=https://api.smartagency-ye.com/api/merchants/{{ $json.body.merchantId }}",
        "options": {}
      },
      "name": "Get Merchant1",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4,
      "position": [
        160,
        448
      ],
      "id": "9868c859-d225-4c81-a323-5c20956b6e77"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://functions-emma-ericsson-ti.trycloudflare.com/api/webhooks/bot-reply/{{ $('Get Merchant1').item.json._id }}",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "sessionId",
              "value": "={{ $('Webhook').item.json.body.sessionId }}"
            },
            {
              "name": "channel",
              "value": "={{ $('Webhook').item.json.body.channel }}"
            },
            {
              "name": "text",
              "value": "={{ $json.output }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1136,
        240
      ],
      "id": "23598f3f-51b9-4314-b9fa-5fd1d0c01b51",
      "name": "HTTP Request2"
    }
  ],
  "pinData": {},
  "connections": {
    "AI Agent": {
      "main": [
        [
          {
            "node": "AI check Responses",
            "type": "main",
            "index": 0
          },
          {
            "node": "HTTP Request2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "MongoDB Chat Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "AI check Responses",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "AI check Responses",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model2": {
      "ai_languageModel": [
        [
          {
            "node": "Structured Output Parser",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "AI check Responses": {
      "main": [
        [
          {
            "node": "If6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "searchProducts": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "If6": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "search knowledge": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Webhook": {
      "main": [
        [
          {
            "node": "Get Merchant1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Merchant1": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "saveExecutionProgress": true,
    "saveManualExecutions": true,
    "saveDataErrorExecution": "all",
    "saveDataSuccessExecution": "all",
    "executionTimeout": 3600,
    "errorWorkflow": "VzqKEW0ShTXA5vPj",
    "timezone": "America/New_York",
    "executionOrder": "v1"
  },
  "versionId": "047162f2-e0dc-4962-9a12-df61a88c520a",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "23319a26f15320cb15e667927e1579ea7a30a6db7a5bedcecf473cfb153c0178"
  },
  "id": "kN2Y7CMXd7Ja49IH",
  "tags": []
}